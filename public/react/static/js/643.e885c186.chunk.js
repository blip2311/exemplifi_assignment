"use strict";(self.webpackChunklaravel_task=self.webpackChunklaravel_task||[]).push([[643],{643:(e,t,s)=>{s.r(t),s.d(t,{CreateTask:()=>u,default:()=>m});var r=s(43),a=s(51),o=s(978),l=s(475),n=(s(52),s(579));const c=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"row top-header d-flex align-items-center",children:[(0,n.jsx)("div",{className:"col-6",children:(0,n.jsxs)("button",{className:"btn-list btn",children:[(0,n.jsx)("img",{src:o,alt:"List Icon"})," List"]})}),(0,n.jsx)("div",{className:"col-6 form-btn-wrap",children:(0,n.jsxs)(l.k2,{to:"/create-task",className:"btn-create-task",children:["Create Task ",(0,n.jsx)(a.pi5,{})]})})]})});var i=s(850),d=s(442);const u=()=>{const[e,t]=(0,r.useState)({title:"",status:"",dueDate:"",description:""}),[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[u,m]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{m(await(0,d.g)())})()}),[]);const h=s=>{const{name:r,value:a}=s.target;t({...e,[r]:a})};return(0,n.jsxs)("main",{className:"content-wrapper",children:[(0,n.jsx)(c,{}),s&&(0,n.jsx)("div",{className:"alert mt-3 "+(o?"alert-danger":"alert-success"),role:"alert",children:o||"Task Submitted Successfully!"}),(0,n.jsxs)("form",{className:"create-task-form",onSubmit:async s=>{s.preventDefault();const r=(()=>{const e=localStorage.getItem("tasks");return e?JSON.parse(e):[]})();let o={title:e.title,status:e.status,date:e.dueDate,description:e.description};const n=JSON.stringify({title:e.title,description:e.description,status:e.status,due_date:e.dueDate});try{const e=await(0,i.I)("tasks.store");if(!e||!e.url)throw new Error("Could not retrieve the route");const t=await fetch(e.url,{method:e.methods[0],headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":u},credentials:"include",body:n});if(422===t.status){console.log("Error 422");let e="Error: Payment Required.";try{const s=await t.json();s&&s.message&&(e=s.message,console.log("Error: "+e))}catch(c){console.error("error retrieveing error")}return l(e),a(!0),void setTimeout((()=>{a(!1),l("")}),3e3)}if(!t.ok)throw new Error("Could not save the task");o=await t.json()}catch(c){console.error("Error saving Task: ",c)}r.push(o),localStorage.setItem("tasks",JSON.stringify(r)),console.log("Tasks in JSON format:",JSON.stringify(r,null,2)),t({title:"",status:"",dueDate:"",description:""}),a(!0),setTimeout((()=>{a(!1),l("")}),3e3)},children:[(0,n.jsx)("h4",{className:"mb-4 form-heading",children:"Create Task"}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col-12 col-md-6 mb-3",children:[(0,n.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),(0,n.jsx)("input",{type:"text",className:"form-control",id:"title",name:"title",value:e.title,onChange:h,required:!0})]}),(0,n.jsxs)("div",{className:"col-12 col-md-6 mb-3",children:[(0,n.jsx)("label",{htmlFor:"filter-with-status",className:"form-label",children:"Select Status"}),(0,n.jsxs)("select",{className:"form-select",name:"status",id:"filter-with-status",value:e.status,onChange:h,required:!0,children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"Select status"}),(0,n.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,n.jsx)("option",{value:"completed",children:"Completed"}),(0,n.jsx)("option",{value:"pending",children:"Pending"})]})]}),(0,n.jsxs)("div",{className:"col-12 col-md-6 mb-3",children:[(0,n.jsx)("label",{htmlFor:"dueDate",className:"form-label",children:"Due Date"}),(0,n.jsx)("input",{type:"date",id:"dueDate",name:"dueDate",className:"form-control",value:e.dueDate,onChange:h,required:!0})]}),(0,n.jsxs)("div",{className:"col-12 mb-4",children:[(0,n.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),(0,n.jsx)("textarea",{className:"form-control",id:"description",name:"description",value:e.description,onChange:h,placeholder:"Please add a description",rows:"3"})]})]}),(0,n.jsx)("button",{type:"submit",className:"btn btn-secondary px-4",children:"Submit"})]})]})},m=u},442:(e,t,s)=>{s.d(t,{g:()=>o});var r=s(850);const a=e=>{const t=`; ${document.cookie}`.split(`; ${e}=`);if(2===t.length)return decodeURIComponent(t.pop().split(";").shift())},o=async()=>{try{const e=await(0,r.I)("sanctum.csrf-cookie");if(!e||!e.url)throw new Error("Url Not found");if(!(await fetch(e.url,{method:e.methods[0],credentials:"include"})).ok)throw new Error("Could not fetch CSRF token");return console.log(a("XSRF-TOKEN")),a("XSRF-TOKEN")}catch(e){console.error("CSRF error:",e)}}},850:(e,t,s)=>{s.d(t,{I:()=>r});const r=async e=>(await(async()=>{if(localStorage.getItem("routeMap"))return;try{const e=await fetch("http://localhost:85/api/route-map");if(!e.ok)throw new Error(`Failed to fetch route map: ${e.status}`);const t=await e.json(),s={};t.forEach((e=>{const[t,r]=Object.entries(e)[0];t&&(s[t]=r)})),console.log(s),localStorage.setItem("routeMap",JSON.stringify(s)),localStorage.setItem("routeMapTimestamp",Date.now().toString())}catch(e){console.error("Error loading route map:",e)}})(),a(e)),a=e=>{try{const t="http://localhost:85";if(!t)throw new Error("REACT_APP_API_BASE_URL is not defined");const s=localStorage.getItem("routeMap");if(!s)return null;const r=JSON.parse(s)[e];return r.url=`${t}/${r.url}`,r||null}catch(t){return console.error(`Error accessing routeMap for "${e}":`,t),null}}},52:()=>{},978:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAM6SURBVHgB7ZjNbxJBGMbfd2YBE9uGpF7spfSmra1Ve/Ek3jwRQGhoRdSbNz16K0c9qf+AIsWmLR9toicv4sXERI00ltiTeLExsckmNY0FdseZWhL2g48tCAf3lwA778zuPJmdeWceAGxsbHoKNqrw+/1uSRq4wxt4EdEjYoyxEjKWWM0+fwZ9wlRwJBLxqAp9zas95rexUlVh3lxu6Rv0GIPg1mJrsFK54ji3vp6QoYdI+gBT6EJrsQL0OGjlIb+41axVMBg9Sak6AhZRFPI9l0ttG3qtL/wdXekrtAljIFeq0lijUQ4E5i5KEp2EI6Io8J6L/lgfI9oGjlGwACK4HY6yx6wuFosNdyJWQCnM+Hy+wfqYRjAFGAOLUEbcZnFZLrugCwwNDQ3Ul7UjDMonsIiCqul0cLmUn4hkHzpAVWE3ldLOY43gdHpJCLaw6rF0eI+BdDpdrlTgJZ82O3AEeO7fVlXySh83ZgkgcQT1EbSDivFm1WtrSSE2C12E6gPFYuHdxPiUyB/epncyiK9mFx9Dj6Fmwc3ixpvxiWmZ57xTvKhbVCgzgHvpTOoB9AFs1SASinoZkrMHjZlaWM6k8mBjY2Nj0y1a5uFgcH6UUuoR14qilPphi+ppKDgcvn6Jn9DjqNui+aE9TyjcXVlJFaAPmG7NoVB0gSAkuFiPvu4gxuD2aX7eKPItHHqMYYRnZ6/dAIYJaAMG6E2nF3sqWjJREYd24VOGf19uVB0Oh528iwuMkWGwCKK6C1D9wM/Vv+rjkraD+en2HHPtoeAVi7LRQkR0XeVzfhBbLm0zqHAcJ0B3ntY4DsIkSyZU4CTE1Af6fJERIRY6gBA6HAjENG+HwD/C7XZ25OdqHD+uOuvLGsEoEcup6ndVMvV0yWRyh7/SI/m5Gqqq7OhNqGYOLy8nSuFQNI+t7NEhTMVEs7+qCNl/wRid4d04wSJi0e3tyZ/1cUOWEJsCUyEPBmtkeKSsMGe8WQvhnPnPW+giho1jc3Pjx5nx6S/cD13hxWPmt6GMxOHNZJ5sQY9pYEILW5NT51d4nuWjjGKkD0cbZZ6n75er0lw2+7SvZ4qm+P033eIDNjY2/x9/ACd8GNJTnbeBAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=643.e885c186.chunk.js.map