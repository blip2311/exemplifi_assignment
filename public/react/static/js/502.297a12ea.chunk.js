"use strict";(self.webpackChunklaravel_task=self.webpackChunklaravel_task||[]).push([[502],{502:(t,e,r)=>{r.r(e),r.d(e,{default:()=>d});var s=r(43),o=r(216),a=r(184),n=r(850),c=r(442),l=r(579);const i=t=>{let{id:e}=t;const[r,o]=(0,s.useState)(""),[a,i]=(0,s.useState)(""),[d,h]=(0,s.useState)([]),[m,u]=(0,s.useState)("");(0,s.useEffect)((()=>{(async()=>{try{const t=await(0,n.I)("tasks.comments.index");if(!t||!t.url)throw new Error("No Url returned");{const r=t.url.replace("{task}",e),s=await fetch(r,{method:t.methods[0]});if(!s.ok)throw new Error("Network response was not ok");const o=await s.json();h(o.data)}}catch(t){console.error("Error fetching task data:",t)}})()}),[e]),(0,s.useEffect)((()=>{(async()=>{u(await(0,c.g)())})()}),[]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("form",{className:"comment-form",onSubmit:async t=>{if(t.preventDefault(),r&&a){const t={author_name:r,content:a};let c={name:r,comment:a};try{const r=await(0,n.I)("tasks.comments.store");if(!r||!r.url)throw new Error("No url returned");const s=r.url.replace("{task}",e),o=await fetch(s,{method:r.methods[0],headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":m},body:JSON.stringify(t)});if(!o.ok)throw new Error("Error saving comment");c=await o.json()}catch(s){console.error("Error saving Comment: ",s)}console.log(c),h([...d,c]),o(""),i("")}},children:[(0,l.jsx)("div",{className:"col-12 col-md-4 mb-3",children:(0,l.jsx)("input",{type:"text",className:"form-control",id:"name","aria-describedby":"emailHelp",value:r,onChange:t=>o(t.target.value),placeholder:"Name"})}),(0,l.jsx)("div",{className:"col-12 col-md-4 mb-4",children:(0,l.jsx)("textarea",{className:"form-control",name:"comment-text",id:"text-area",placeholder:"Please add a comment",rows:"3",value:a,onChange:t=>i(t.target.value)})}),(0,l.jsx)("button",{type:"submit",className:"btn btn-secondary px-4 mt-2 mb-4",children:"Submit"})]}),(0,l.jsx)("hr",{}),(0,l.jsx)("h4",{children:"Comments"}),(0,l.jsx)("ul",{className:"comment-list mt-4",children:d.map(((t,e)=>(0,l.jsxs)("li",{children:[(0,l.jsx)("span",{children:t.author_name})," ",t.content]},e)))})]})},d=()=>{const{id:t}=(0,o.g)(),[e,r]=(0,s.useState)({title:"",due_date:"",status:"",description:""});return(0,s.useEffect)((()=>{(async()=>{try{(0,n.I)("tasks.index").then((async e=>{const s=e.url,o=await fetch(s,{method:e.methods[0]});if(!o.ok)throw new Error("Network response was not ok");const a=(await o.json()).data.find((e=>e.id===parseInt(t)));console.log(a),r(a||{})}))}catch(e){console.error("Error fetching task data:",e)}})()}),[t]),(0,l.jsx)("main",{className:"content-wrapper",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsxs)("div",{className:"col-12 task-details-wrap",children:[(0,l.jsx)("h1",{className:"heading",children:e.title}),(0,l.jsx)("table",{children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsxs)("th",{children:[(0,l.jsx)(a.obD,{})," Created At"]}),(0,l.jsx)("td",{children:e.due_date})]}),(0,l.jsxs)("tr",{children:[(0,l.jsxs)("th",{children:[(0,l.jsx)(a.gVl,{})," Status"]}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"status",children:e.status})})]})]})}),(0,l.jsx)("h4",{className:"mt-4",children:"Description"}),(0,l.jsx)("p",{children:e.description}),(0,l.jsx)("h6",{className:"mt-4",children:"Add Comment"}),(0,l.jsx)(i,{id:t})]})})})})}},442:(t,e,r)=>{r.d(e,{g:()=>a});var s=r(850);const o=t=>{const e=`; ${document.cookie}`.split(`; ${t}=`);if(2===e.length)return decodeURIComponent(e.pop().split(";").shift())},a=async()=>{try{const t=await(0,s.I)("sanctum.csrf-cookie");if(!t||!t.url)throw new Error("Url Not found");if(!(await fetch(t.url,{method:t.methods[0],credentials:"include"})).ok)throw new Error("Could not fetch CSRF token");return console.log(o("XSRF-TOKEN")),o("XSRF-TOKEN")}catch(t){console.error("CSRF error:",t)}}},850:(t,e,r)=>{r.d(e,{I:()=>s});const s=async t=>(await(async()=>{if(localStorage.getItem("routeMap"))return;try{const t=await fetch("http://localhost:85/api/route-map");if(!t.ok)throw new Error(`Failed to fetch route map: ${t.status}`);const e=await t.json(),r={};e.forEach((t=>{const[e,s]=Object.entries(t)[0];e&&(r[e]=s)})),console.log(r),localStorage.setItem("routeMap",JSON.stringify(r)),localStorage.setItem("routeMapTimestamp",Date.now().toString())}catch(t){console.error("Error loading route map:",t)}})(),o(t)),o=t=>{try{const e="http://localhost:85";if(!e)throw new Error("REACT_APP_API_BASE_URL is not defined");const r=localStorage.getItem("routeMap");if(!r)return null;const s=JSON.parse(r)[t];return s.url=`${e}/${s.url}`,s||null}catch(e){return console.error(`Error accessing routeMap for "${t}":`,e),null}}}}]);
//# sourceMappingURL=502.297a12ea.chunk.js.map